프로비저닝

#### vagrant

- 운영체제 차원의 프로비저닝 툴
- 소프트웨어를 쉽게 배포할 수 있는 프로비저닝 툴



vagrant status

-> vagrant파일 인스턴스 -> 중지 된 상태. 기동시켜야 됨

운영체제를 관리할 수 있는 운영체제 툴

세 가지 리눅스 pc에 어떤 프로그램을 설치한다? 파이썬 설치

소프트웨서 관리 툴

마스터/노드1,노드2 수작업 설치

xshell에 노드1,2 수작업 접속

10~100개 수작업 어케함?

- 프로비저닝 툴 필요!
- 엔서블



엔서블 이전에 설정 파일을 이용해 운영 체제를 관리해주는 것들은 이전에도 있었음

puppet,chef,salt..ansible!

configuration 을 통해 우리가 필요한 시스템이나 서비스를 배포하고 관리하는 서비스를 사용할 줄 알아야 함

관리환경 구축 필요

이름은 기억해두자~



python이라는 언어 자체가 쓰기 편하고 배포 편리 

윈도우 어플리케이션도 만들 수 있다!

리눅스를 설치하면 무조건 파이썬은 설치. 근데 2.7 버전이 설치된다

3점대 버전을 설치하고 싶으면 새로 하길...

앤서블은 파이썬이 기본이 되어야 하기 떄문에 추가로 설치해야 될 다른 환경은 없다

우리가 주로 사용하는 데스크탑에는 파이선이 내장되어있지는 않음

처음엔 윈도우 초기상태를 사용할 때는 파이썬을 설치해야 됨

리눅스에는 파이썬이 있어서 별도 추가작업 없음



도커 이미지 파일을 위해 필요한 커맨드-> 도커파일 필요

포맷 정해져 있음

FROM/CMD/ENTRYPOINT 등..사용되어지는 문법이 도커에서만 사용됨

다른 환경에서는 도커파일 포맷 사용하지 않음

특정 고유 상황에서만 사용 가능한 언어를 DSL이라고 부른다



다 각자 고유한 언어/문법이 있음

셰프에는 YAML도 지원

쿠버네티스에서 다양한 자원 사용해보았음

정보의 오브젝트들을 위해 YAML파일 형식사용

YML파일들은 직관적..

어떨 때는 들여 쓰기가 되고 어떨 때는 -가 들어갈 때

"-" 가 들어가면 리스트 형태(복수)

"-"가 안들어가면 단일값이라는 뜻

에이전트 부분

제어하기 위해(마스터에서 노드 3가지 있다고 가정. 세 개의 노드가 있다면 자바라는 각 노드에 들어가서 각각 소프트웨어 설치했을 것 )

통신하는 가장 쉬운 방법

에이전트들이 하나씩 있으면 됨

마스터 노드에서 워크 노드로 통신하기 위한 모듈이 있어야지만 마스터노드에서 전달할 때 값들이 전달됨

ansible은 agent 가 필요없음

파이썬이기 때문! 리눅스에 포함되어 있기 떄문

windows에서는 필수

리눅스에서는 내장되어있어서 다운받을 필요 없음

파이썬 통신을 통해 명령어 전달

ssh 를 통해 필요한 명령어를 전달함







- 사용자의 요구에 맞게 시스템 자원을 할당, 배치, 배포해 두었다가 필요 시 시스템을 즉시 사용할 수 있는 상태로 미리 준비해 두는 것
- vagrant를 통해 리눅스 등 여러 소프트웨어를 설치하는 것도 이에 해당됨

hosts파일: nginx라는 그룹으로 호출하면 노드01 과 노드 02로 보낸다

대상 타겟이 어떤 것이든 상관 없다. 파이썬만 들어있으면 됨

연결이 안될 때는







![image-20210326155618733](C:\Users\MIN\AppData\Roaming\Typora\typora-user-images\image-20210326155618733.png)

이런 에러가 떴었다

ssh-copy-id vagrant@< 연결할 노드 이름 >

![image-20210326155657466](C:\Users\MIN\AppData\Roaming\Typora\typora-user-images\image-20210326155657466.png)

![image-20210326155725739](C:\Users\MIN\AppData\Roaming\Typora\typora-user-images\image-20210326155725739.png)

따란~..

free: 메모리 확인

ansible all -m shell -a <리눅스 명령어>

![image-20210326164931416](C:\Users\MIN\AppData\Roaming\Typora\typora-user-images\image-20210326164931416.png)