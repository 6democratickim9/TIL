https://www.youtube.com/watch?v=Zimhvf2B7Es&t=73s

Web Server..?:thinking:

- 웹 서버는 소프트웨어의 개념
- 아파치와 nginx가 대표적인 제품
- 웹 서버는 **웹 사이트를 제공하는 서버로 만들어주는 서비스**

그렇다면, 웹사이트가 서비스 될 때 필요한 것들이 뭐가 있을까?

- 웹사이트는 브라우저가 읽을 수 있는 파일들과 기타 데이터들을 서버에서 사용자의 컴퓨터로 전송할 수 있어야 함
- 파일들은 원래 서버 컴퓨터에 저장되어 있음
  - 해당 서버의 특정 디렉토리에 파일을 넣어두면 폴더를 외부에 개방될 때 서버에 지정된 웹사이트 주소로 접속하면 파일 받을 수 있음
- 웹서버는 엔진엑스, iis, 아파치가 대표적임
- 아파치에 php를 해석할 수 있는 모듈을 설치하면 웹 접근이 있을 때마다 php 코드에 적힌 레시피대로 db에서 자료를 가져올 수 있음

## Tomcat

- 자바와 JSP로 만든 웹 또는 API application을 실행할 때 WAS가 사용됨

  - Web Application Server

  - 단순이 무엇을 갖다주는 것이 아닌 프로그래밍 된 것을 더 한다는 것

    :point_right: 동적 사이트를 전문적으로 처리하는 것

- 아파치나 엔진엑스도 php는 해석할 수 있지만 스프링으로 넘어가면 톰캣이 필요해짐(WAS 필요)

- 자바 바이트코드로 컴파일되는 언어들에 쓰이는걸로 Tomcat, Jetty 등이 있음

- 스프링으로 코딩한 웹앱을 war 파일로 빌드하면 그 안에 `.class` 파일들과 jsp, 이미지 파일 등이 압축되어있음

  - 톰캣을 다운받아보면 특정 폴더에 그 중 특정 폴더에 war 파일을 넣고 명령어를 실행하면 스프링 서비슫가 톰캣을 사용해서 돌게 됨
  - 요즘은 반대로 스프링을 톰캣이 들어있는 jar 파일로 빌드해서 배포

- 진영마다 WAS가 다름

웹서버는 reverse proxy를 제공한다는데...?

## Reverse Proxy

- 손님들에게서 서버의 정보를 가린다는 뜻
- 정적,동적 리소스들이 있는 위치나 내용을 가린다

### 웹 서버를 사용하는 이유?

- 앞단에 웹 서버를 두면 reverse proxy 가 되어 서버의 정보를 가릴 수 있음
- 로드밸런싱도 가능!
- 캐싱
  - reverse proxy의 캐싱
  - 서버 단사의 캐시
  - 서버로 찾아오는 사용자들이 자주 사용하는 것들을 미리 모아뒀다가 제공해주는 것
- 이 외에도 웹서버는 수많은 모듈들을 사용해서 뒷단 WAS들이 정상동작하는지 주기적으로 헬스체크 하는 등의 역할도 수행함

톰캣을 여러개 사용하는 이유?

- 지속성
- 서비스가 추가되어 업데이트가 필요할 시 톰캣을 여러개 두면 차례차례 업데이트 -> 서비스를 분산시켜 서버가 닫힐 일이 없음
- 환경에 따라 여러 변수가 있지만 톰캣을 여러 개 두는 것이 성능 측면에서 더 나음
- 인스턴스= 프로그램이 돌아가고 있는 상태