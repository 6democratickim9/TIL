# 데이터베이스 정규화(Normalization)

> 데이터 중복을 최소화하고 데이터의 무결성 및 안정성을 보장하기 위해 테이블을 분해하는 과정

- ## 제1정규형(1NF)

  - 도메인이 원자값이다

    = 복수의 속성값을 갖는 속성을 분리

    - 도메인: 속성 혹은 칼럼이 가질 수 있는 값의 범위
    - 원자값: 더 이상 쪼개질 수 없는 값

  - 주문서에 상품번호, 상품내역, 단가 등의 속성(컬럼)에 저장되는 값이 원자값으로 저장되어야 하므로 별도의 주문 상세 테이블로 분리되어야 함

  

- ### 복합키

  - **두 개 이상의 컬럼을 이용해 식별자를 만드는 것**

  - ```sql
    create table shares(
    	customer_id varchar2(100),
    	stock_id varchar2(100),
    	quantity number not null,
    	constraint pk_shares primary key(customer_id,stock_id)
    )
    
    insert into shares(customer_id, stock_id, quantity) values('java','삼성',10);
    insert into shares(customer_id, stock_id, quantity) values('java','LG',20);
    insert into shares(customer_id, stock_id, quantity) values('java','삼성',5);
    
    update shares set quantity=quantity+5 where customer_id='java' and stock_id='삼성';
    
    select * from shares;
    ```

    ![image-20211027144900054](C:\Users\MIN\TIL\SQL\KOSTA_1027.assets\image-20211027144900054.png)

  - ### Entity

    - 실체, 객체라는 의미
    - 사람, 장소, 물건, 사건과 같은 명사
    - 업무상 관리가 필요한 관심사
    - 저장이 되기 위한 어떤 것
    - 유/무형에 따라 분류됨
      - 유형 엔티티: **지속적으로 사용**되는 엔티티
      - 개념 엔티티: **물리적 형태가 없**는 엔티티. 개념적으로 사용됨
      - 사건 엔티티: **비즈니스 프로세스를 실행**하면서 생성되는 엔티티

- ## 제2정규형(2NF)

  - 부분 함수 종속을 분리하여 **완전 함수 종속 상태**로 만든다

  - 복합키에 부분종속되는 테이블은 **별도의 테이블로 분류**

    - 데이터를 대표하는 키가 **여러 개의 컬럼으로 구성된 것**

  - ex

    - 주문상세 테이블에서는 주문번호와 상품번호가 복합키
    - 여기에 일반 속성으로 상품내역과 단가, 주문 수량이 있음
    - 주문번호+상품번호로 구성된 복합키에 완전 종속되어 있는 속성은 주문수량
    - 상품내역, 단가는 상품번호에만 종속
    - 복합키에는 상품내역과 단가는 부분 종속 상태

    

- ## 제3정규형(3NF)

  - 이행 함수적 종속을 분리
    - A->B이면 B->C이고 A->C이다
  - 일반 속성에 종속적인 속성을 분리



https://jhnyang.tistory.com/357

참고!

--------

SQL의 길은 멀고도 험하구나..:cry:언젠간 나도 db마스터...!

https://jerryjerryjerry.tistory.com/49

기억이 안나요...슈퍼키 대체키 후보키 기본키 외래키

1. ## 슈퍼키

   - 각 행을 **유일하게 식별**할 수 있는 하나 또는 그 이상의 속성들의 집합 
     - 주민등록번호
     - 학번같은 것
   - 유일성만 만족하면 슈퍼키가 될 수 있음
   - 속성끼리 묶는것도 가능. 중복값이 안나오고 서로 구분만 가능하면 됨

   

2. ## 후보키

   - 각 행을 유일하게 식별할 수 있는 최소한의 속성들의 집합
   - 후보키는 기본키가 될 수 있는 후보들
   - **유일성과 최소성**을 동시에 만족
     - **최소성**: 키를 구성하고 있는 여러 속성 중에서 *하나라도 없으면 튜플을 유일하게 구분할 수 없는*, 꼭 필요한 최소한의 속성들로만 키를 구성하는 특성
     - 주민등록번호와 학번 모두 고유하기 때문에 후보키 가능!

3. ## 기본키

   - 후보키들 중에서 하나를 선택한 키로 **최소성과 유일성을 만족하는 속성**
   - 기본키는 오직 1개
   - 이건 나도 안다~
   - NULL값과 중복값 안됨

4. ## 대체키

   - 후보키가 두 개 이상일 경우 **기본키를 제외하고 남은 후보키**
   - 대체키는 기본키로 선정되지 않은 후보키
     - 주민등록번호랑 학번 중에서 학번이 기본키가 되면 후보키가 대체키가 된다

5. ## 외래키

   - 테이블이 **다른 테이블의 데이터를 참조**하여 테이블간의 **관계를 연결**하는 것
   - 다른 테이블의 데이터를 참조할 때 **없는 값을 참조할 수 없도록 제약**을 주는 것
   - 참조될 열의 값은 **참조될 테이블에서 기본키로 설정**되어 있음
   - 얘두 안다!

----------

ㅠㅠ

이해를 못하니 방과후 복습겸 다시보기,,,





## 제1정규형

- 